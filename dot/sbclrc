;;;; sbclrc -- configuration file for SBCL
;;;; Created   :
;;;; Modified  : <2020-02-03 Mon 23:01:23 GMT>
;;;; Author    : Sharlatan <sharlatanus@gmail.com>

;;;; Commentary:

;;;; Code:

(defvar *user-sbcl-src-path*)
(defvar *user-projects*)
(defvar *user-quicklisp-init-path-maybe*)
(defvar *user-quicklisp-projects-path*)

(defun from-home-path (path)
  "Build a absolute path to user target directory including $HOME."
  (merge-pathnames path (user-homedir-pathname)))

(setf *user-sbcl-src-path* (from-home-path
                            "code/sbcl/"))

(setf *user-quicklisp-init-path-maybe*
      (mapcar 'from-home-path
              '(".local/share/common-lisp/setup.lisp"
                ".quicklisp/setup.lisp")))

(setf *user-projects*
      (mapcar 'from-home-path
              '("code/CommonLisp"
                ".local/share/common-lisp/quicklisp/"
                "IPEC/code/web-sgs/")))

(when (probe-file *user-sbcl-src-path*)
  (sb-ext:set-sbcl-source-location *user-sbcl-src-path*))

#-quicklisp
(loop for ql-init in *user-quicklisp-init-path-maybe*
   when (probe-file ql-init) do (load ql-init))

(require "asdf")

(setf asdf:*central-registry* '())

(loop for project in *user-projects*
   when (probe-file project) do
   (push project asdf:*central-registry*))

;;;; sbclrc ends here
